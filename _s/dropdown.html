<div class="row">
  <div class="notes">
    <p>Задача состоит в том, чтобы сделать Dropdown меню. Если элемент один, то включение просиходит правильно. Со
      списком появляются ошибки. Логика такая:</p>
    <ol>
      <li>dropDownlinks - массив всех ссылок, клик о которым открывает свой dropdown</li>
      <li>dropDownBlocks - массив всех блоков dropdown</li>
      <li>По клику на ссылку переключаем ей класс active</li>
      <li>Всем блокам dropdown убираем класс active (прячем их)</li>
      <li>Если нажатая ссылка имеет класс active, то соседний для неё блок тоже становится видимым - active</li>
    </ol>
    <p>Проблема в том, что должна быть только одна ссылка в состоянии active, а toggle это решает только для текущей, а
      не для ранее нажатых</p>
    <p>Решение вижу таким: по клику на ссылку, проходим по массиву ссылок и удаляем у всех, кроме текущей (на которую
      кликнули) класс active. А потом уже всё как в скрипте. Думал создать новый массив в цикле и в нём удалить текущий
      элемент, а потом еще в одном цикле для всех удалить active. Но моих познаний пока не хватает. Может посоветуете
      куда посмотреть? Спасибо</p>
  </div>
  <div class="sub-nav">
    <ul class="sub-nav__list">
      <li class="sub-nav__item">
        <a href="#" class="sub-nav__link dropdown-link">
          Реализм
        </a>
        <div class="sub-nav__artists-block dropdown-block">
          <ul class="sub-nav__artist-list custom-bar">
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Тинторретто</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Фридрих</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Леонардо</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Вероккьо</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Тинторретто</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Фридрих</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Леонардо</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Вероккьо</a>
            </li>
          </ul>
        </div>
      </li>
      <li class="sub-nav__item">
        <a href="#" class="sub-nav__link dropdown-link">
          Импрессионизм
        </a>
        <div class="sub-nav__artists-block dropdown-block">
          <ul class="sub-nav__artist-list custom-bar">
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Тинторретто</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Фридрих</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Леонардо</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Вероккьо</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Тинторретто</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Фридрих</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Леонардо</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Вероккьо</a>
            </li>
          </ul>
        </div>
      </li>
      <li class="sub-nav__item">
        <a href="#" class="sub-nav__link dropdown-link">
          Постимпрессионизм
        </a>
        <div class="sub-nav__artists-block dropdown-block">
          <ul class="sub-nav__artist-list custom-bar">
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Тинторретто</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Фридрих</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Леонардо</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Вероккьо</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Тинторретто</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Фридрих</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Леонардо</a>
            </li>
            <li class="sub-nav__artist-item">
              <a class="sub-nav__artist-link" href="#">Вероккьо</a>
            </li>
          </ul>
        </div>
      </li>
    </ul>
  </div>
</div>

<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="0">
    Бенедетто ди Биндо
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="1">
    Бергоньоне, Амброджо
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="2">
    Биссоло, Франческо
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="3">
    Больтраффио, Джованни
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="4">
    Бонсиньори, Франческо
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="5">
    Боттичини, Рафаэлло
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="6">
    Брамантино
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="7">
    Бреа, Людовико
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="8">
    Бьяджо д’Антонио Туччи
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="9">
    Веккьетта
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link artists-list__link--active" href="#" data-artist-path="10">
    Андреа Верроккьо
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="11">
    Доменико Гирландайо
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="12">
    Беноццо Гоццоли
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="13">
    Граначчи, Франческо
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="14">
    Грегорио ди Чекко
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="15">
    Джованни да Удине
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="16">
    Джованни ди Паоло
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="17">
    Джорджоне
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="18">
    Парентино, Бернардо
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="19">
    Пезеллино
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="20">
    Пьетро Перуджино
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="21">
    Перуцци, Бальдассаре
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="22">
    Пизанелло
  </a>
</li>
<li class="artists-list__item">
  <a class="artists-list__link" href="#" data-artist-path="23">
    Пинтуриккьо
  </a>
</li>

<picture class="gallery__picture">
  <source data-srcset="img/gallery-14@2x-873eda9ca8.webp 2x, img/gallery-14-682f4c7c28.webp" media="(min-width: 1025px)"
    srcset="img/gallery-14@2x-873eda9ca8.webp 2x, img/gallery-14-682f4c7c28.webp">
  <source data-srcset="img/gallery-14@2x-tab-20faa50a9e.webp 2x, img/gallery-14-tab-b5fbc98876.webp"
    media="(min-width: 577px)" srcset="img/gallery-14@2x-tab-20faa50a9e.webp 2x, img/gallery-14-tab-b5fbc98876.webp">
  <source data-srcset="img/gallery-14-mob-5c1c13fdd1.webp" srcset="img/gallery-14-mob-5c1c13fdd1.webp">
  <img alt="Картина-14" aria-label="Картина-14" class="lazy entered loaded" data-src="img/gallery-14-682f4c7c28.webp"
    data-ll-status="loaded" src="img/gallery-14-682f4c7c28.webp">
</picture>

<script>
  const MOBILE_WIDTH = 580;

  const sliderParams = {
    cardsContainerName: "js-slider",
    cardsWrapName: "js-slides-wrap",
    card: "slide",
    paginationClassName: "test-pagination",
    navClassName: "test-navigation",
    navBtnClassName: "nav-btn",
    navPrev: "test-prev",
    navNext: "test-next"
  };

  function getWindowWidth() {
    return Math.max(
      document.body.scrollWidth,
      document.documentElement.scrollWidth,
      document.body.offsetWidth,
      document.documentElement.offsetWidth,
      document.body.clientWidth,
      document.documentElement.clientWidth
    );
  }

  function activateSlider(params) {
    const navigation = document.createElement("div");
    const pagination = document.createElement("div");
    const navBtnPrev = document.createElement("button");
    const navBtnNext = document.createElement("button");

    navigation.classList.add(params.navClassName);

    navBtnPrev.classList.add(params.navBtnClassName);
    navBtnPrev.classList.add(params.navPrev);
    navigation.prepend(navBtnPrev);

    pagination.classList.add(params.paginationClassName);
    navigation.append(pagination);

    navBtnNext.classList.add(params.navBtnClassName);
    navBtnNext.classList.add(params.navNext);
    navigation.append(navBtnNext);

    params.cardsContainer.prepend(navigation);

    params.cardsContainer.classList.add("swiper-container");
    params.cardsWrap.classList.add("swiper-wrapper");

    params.cardsSlider = new Swiper(`.${params.cardsContainerName}`, {
      slidesPerView: 2,
      spaceBetween: 20,

      pagination: {
        el: `.${params.cardsContainerName} .${params.paginationClassName}`,
        type: "fraction"
      },

      navigation: {
        nextEl: `.${params.navNext}`,
        prevEl: `.${params.navPrev}`
      },

      on: {
        beforeInit() {
          document.querySelectorAll(`.${params.card}`).forEach((el) => {
            el.classList.add("swiper-slide");
          });
        },

        beforeDestroy() {
          this.slides.forEach((el) => {
            el.classList.remove("swiper-slide");
            el.removeAttribute("role");
            el.removeAttribute("aria-label");
          });

          this.pagination.el.remove();
          navigation.remove();
        }
      }
    });
  }

  function destroySlider(params) {
    params.cardsSlider.destroy();
    params.cardsContainer.classList.remove("swiper-container");
    params.cardsWrap.classList.remove("swiper-wrapper");
    params.cardsWrap.removeAttribute("aria-live");
    params.cardsWrap.removeAttribute("id");
  }

  function checkWindowWidth(params) {
    const currentWidth = getWindowWidth();
    params.cardsContainer = document.querySelector(
      `.${params.cardsContainerName}`
    );
    params.cardsWrap = document.querySelector(`.${params.cardsWrapName}`);

    if (
      currentWidth > MOBILE_WIDTH && (!params.cardsSlider || params.cardsSlider.destroyed)
    ) {
      activateSlider(params);
    } else if (currentWidth <= MOBILE_WIDTH && params.cardsSlider) {
      destroySlider(params);
    }
  }

  checkWindowWidth(sliderParams);

  window.addEventListener("resize", function () {
    checkWindowWidth(sliderParams);
  });

</script>
