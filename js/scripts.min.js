$(function(){$("#accordion").accordion({header:"> li > .select-accordion__title",collapsible:!0,heightStyle:"content",active:0,animate:200})});const heroSlider=new Swiper(".site-slider",{direction:"horizontal",autoplay:{delay:15e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0}}),heroSliderObj=document.querySelector(".site-slider").swiper,gallerySlider=new Swiper(".gallery-slider",{slidesPerView:1,grid:{rows:1,fill:"row"},spaceBetween:20,pagination:{el:".section-gallery .gallery-swiper-pagination",type:"fraction",clickable:!1},navigation:{nextEl:".section-gallery .control-button-next-dark",prevEl:".section-gallery .control-button-prev-dark"},breakpoints:{480:{slidesPerView:2,grid:{rows:2},slidesPerGroup:2,spaceBetween:34},1025:{slidesPerView:3,grid:{rows:2},slidesPerGroup:3,spaceBetween:50}},a11y:!1,freeMode:!1}),gallerySliderObj=document.querySelector(".gallery-slider").swiper,partnerSlider=new Swiper(".partners-slider",{navigation:{nextEl:".control-button-next-light",prevEl:".control-button-prev-light"},a11y:!1,freeMode:!1,breakpoints:{480:{slidesPerView:1,spaceBetween:0},768:{slidesPerView:2,spaceBetween:34},1024:{slidesPerView:2,spaceBetween:50},1280:{slidesPerView:3,spaceBetween:50}}}),partnerSliderObj=document.querySelector(".partners-slider").swiper,MOBILE_WIDTH=480,START_BREAKPOINT=480,eventsrow=document.querySelector(".events-row"),allevents=document.querySelector(".allevents"),eventblock=document.querySelectorAll(".event-block");function getWindowWidth(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth)}function getWindowHeight(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}const eventsSliderParams={paginationClassName:"events-pagination",cardsContainerName:"events-slider",cardsWrapName:"events-row-wrap",card:"event-block"};function activateEventsSlider(e){e.cardsContainer.classList.add("swiper"),e.cardsWrap.classList.add("swiper-wrapper"),e.cardsWrap.classList.remove("events-row"),e.eventsCardsSlider=new Swiper(`.${e.cardsContainerName}`,{slidesPerView:1,spaceBetween:20,pagination:{el:`.${e.cardsContainerName} .${e.paginationClassName}`,clickable:!0},a11y:!1,freeMode:!1,on:{beforeInit(){document.querySelectorAll(`.${e.card}`).forEach(e=>{e.classList.add("swiper-slide")})},beforeDestroy(){this.slides.forEach(e=>{e.classList.remove("swiper-slide"),e.removeAttribute("role"),e.removeAttribute("aria-label")})}}})}function destroyEventsSlider(e){e.eventsCardsSlider.destroy(),e.cardsContainer.classList.remove("swiper"),e.cardsWrap.classList.remove("swiper-wrapper"),e.cardsWrap.removeAttribute("aria-live"),e.cardsWrap.removeAttribute("id"),e.cardsWrap.classList.add("events-row")}function checkWindowWidth(e){const t=getWindowWidth();e.cardsContainer=document.querySelector(`.${e.cardsContainerName}`),e.cardsWrap=document.querySelector(`.${e.cardsWrapName}`),t<=START_BREAKPOINT&&(!e.eventsCardsSlider||e.eventsCardsSlider.destroyed)?activateEventsSlider(e):t>=START_BREAKPOINT&&e.eventsCardsSlider&&destroyEventsSlider(e)}checkWindowWidth(eventsSliderParams);const editionsSlidersets={cardsContainerName:"editions-slider",cardsWrapName:"editions-wrapper",card:"edition-slide"};function activateEditionsSlider(e){e.cardsContainer.classList.add("swiper"),e.cardsWrap.classList.add("swiper-wrapper"),e.editionsCardsSlider=new Swiper(`.${e.cardsContainerName}`,{slidesPerView:2,slidesPerColumn:1,spaceBetween:50,pagination:{el:".section-editions .gallery-swiper-pagination",type:"fraction"},navigation:{nextEl:".section-editions .control-button-next-dark",prevEl:".section-editions .control-button-prev-dark"},a11y:!1,freeMode:!1,breakpoints:{481:{slidesPerView:2,slidesPerGroup:2,spaceBetween:34},1024:{slidesPerView:2,slidesPerGroup:2,spaceBetween:50},1280:{slidesPerView:3,slidesPerGroup:3,spaceBetween:50}},on:{beforeInit(){document.querySelectorAll(`.${e.card}`).forEach(e=>{e.classList.add("swiper-slide")})},beforeDestroy(){this.slides.forEach(e=>{e.classList.remove("swiper-slide"),e.removeAttribute("role"),e.removeAttribute("aria-label")})}}})}function destroyEditionsSlider(e){e.editionsCardsSlider.destroy(),e.cardsContainer.classList.remove("swiper"),e.cardsWrap.classList.remove("swiper-wrapper"),e.cardsWrap.removeAttribute("aria-live"),e.cardsWrap.removeAttribute("id")}function checkWindowWidthEditions(e){const t=getWindowWidth();e.cardsContainer=document.querySelector(`.${e.cardsContainerName}`),e.cardsWrap=document.querySelector(`.${e.cardsWrapName}`),t<=MOBILE_WIDTH&&e.editionsCardsSlider?destroyEditionsSlider(e):t>=MOBILE_WIDTH&&(!e.editionsCardsSlider||e.editionsCardsSlider.destroyed)&&activateEditionsSlider(e)}function fixGallery(){document.querySelector(".gallery-slider__wrapper").style.width=null}function buildEvents(){const e=getWindowWidth();e>=992?countEvents=3:e<992&&e>767?countEvents=2:e<=767&&e>=481?countEvents=1:e<=480&&(countEvents=1/0),eventblock.forEach(e=>{e.classList.remove("event-block--hidden")}),console.log("Ширина экрана: "+e+"px"),console.log("Кол-во событий в ряд: "+countEvents);for(var t=countEvents;t<eventblock.length;t++)eventblock[t].classList.add("event-block--hidden")}function closeModal(){document.querySelector(".gallery-modal").classList.remove("is-open"),document.querySelector(".modal-block").classList.remove("is-open")}function closeSearch(){document.querySelector(".toggle-search").classList.remove("is-active"),document.querySelector(".search-form").classList.remove("is-active")}function menuHeight(){const e=getWindowWidth(),t=getWindowHeight(),o=document.querySelector(".header").offsetHeight,i=document.querySelector(".site-hero").offsetHeight,r=document.querySelector(".main-nav");console.log("Высота .header: "+o+"px"),console.log("Высота секции .hero: "+i+"px"),console.log("Высота окна: "+t+"px"),e<1200&&(r.style.maxHeight=i-o+"px")}checkWindowWidthEditions(editionsSlidersets);var spolerCheckboxContainer=document.querySelector(".section-editions__checkboxes");function setEditionSpoilerHeight(){var e=getWindowWidth(),t=document.querySelectorAll(".custom-checkbox--active").length,o=document.querySelectorAll(".custom-checkbox").length;if(t)var i=document.querySelector(".custom-checkbox--active").offsetHeight;else i=document.querySelector(".custom-checkbox").offsetHeight;if(console.log("ww = "+e+" MOBILE_WIDTH = "+MOBILE_WIDTH),console.log("Активных чекбоксов = "+t),console.log("Всего чекбоксов = "+o),console.log("Высота чекбокса = "+i),e<=MOBILE_WIDTH){var r=i*t;spolerCheckboxContainer.style.height=r+"px",console.log("Высота контейнера: "+r)}else spolerCheckboxContainer.style.height=null,console.log("NOT MOBILE WIDTH")}function setEditionSpoilerFullHeight(){var e=getWindowWidth(),t=document.querySelectorAll(".custom-checkbox--active").length,o=document.querySelectorAll(".custom-checkbox").length,i=document.querySelector(".custom-checkbox").offsetHeight;if(t)i=document.querySelector(".custom-checkbox--active").offsetHeight;else i=document.querySelector(".custom-checkbox").offsetHeight;e<=MOBILE_WIDTH&&(spolerCheckboxContainer.style.height=i*o+"px",console.log("ww = "+e+" MOBILE_WIDTH = "+MOBILE_WIDTH),console.log("setEditionSpoilerFullHeight(): "+i*o+"px"))}function resetEditionsSpoiler(){document.querySelector(".editions-expand").classList.remove("is-active"),document.querySelector(".section-editions__checkboxes").classList.remove("is-open")}window.addEventListener("resize",function(){setEditionSpoilerHeight(),resetEditionsSpoiler(),fixGallery(),buildEvents(),checkWindowWidth(eventsSliderParams),checkWindowWidthEditions(editionsSlidersets),menuHeight(),gallerySlider.init()}),window.addEventListener("DOMContentLoaded",function(){fixGallery(),buildEvents(),menuHeight(),setEditionSpoilerHeight(),resetEditionsSpoiler(),allevents.addEventListener("click",e=>{if(e.preventDefault(),eventsrow.classList.toggle("fullrow"),allevents.closest("section").scrollIntoView({block:"start",behavior:"smooth"}),eventsrow.classList.contains("fullrow")){allevents.innerHTML="Скрыть события",allevents.setAttribute("aria-label","Скрыть события");for(var t=0;t<eventblock.length;t++)eventblock[t].classList.remove("event-block--hidden")}else{allevents.innerHTML="Все события",allevents.setAttribute("aria-label","Показать все события");for(t=countEvents;t<eventblock.length;t++)eventblock[t].classList.add("event-block--hidden")}});const e=document.querySelector(".js-choice");new Choices(e,{placeholder:!1,searchEnabled:!1,itemSelectText:"",position:"bottom"});document.querySelector(".choices").setAttribute("aria-label","Выберите тип искусства"),ymaps.ready(function(){var e=new ymaps.Map("map",{center:[55.758468,37.601088],zoom:15,controls:["geolocationControl","zoomControl"]},{suppressMapOpenBlock:!0,geolocationControlSize:"large",geolocationControlPosition:{top:"330px",right:"20px"},geolocationControlFloat:"none",zoomControlSize:"small",zoomControlFloat:"none",zoomControlPosition:{top:"260px",right:"20px"}}),t=new ymaps.Placemark(e.getCenter(),{},{iconLayout:"default#image",iconImageHref:"img/pin.svg",iconImageSize:[20,20],iconImageOffset:[-3,-45]});e.geoObjects.add(t)});var t=document.querySelector("input[type='tel']");new Inputmask("+7 (999)-999-99-99").mask(t),new JustValidate(".contact-form",{colorWrong:"#D11616",rules:{name:{required:!0,minLength:3,maxLenght:10},tel:{required:!0,function:(e,o)=>{const i=t.inputmask.unmaskedvalue();return Number(i)&&10===i.length}}},messages:{name:{required:"Как вас зовут?",minLength:"Минимум 3 символа",maxLenght:"Максимум 10 символов"},tel:{required:"Укажите ваш телефон",function:"Только 10 цифр номера"}},submitHandler:function(e){let t=new FormData(e),o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(200===o.status?(console.log("Отправлено"),swal({title:"Спасибо!",text:"Ваша заявка успешно отправлена",icon:"success"}),e.reset()):swal({title:"Ошибка!",text:"Заявка не отправлена. Что-то пошло не так",icon:"error"}))},o.open("POST","order.php",!0),o.send(t)}}),document.querySelectorAll(".scroll-link").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.getAttribute("href").substring(1);const o=document.getElementById(t),i=document.querySelector(".top-nav").offsetHeight,r=o.getBoundingClientRect().top-i;for(var n=document.querySelectorAll(".main-nav__link"),s=0;s<n.length;s++){var l=e.target;for(var c of n)c!==l&&c.classList.remove("is-active"),l.classList.toggle("is-active")}window.scrollBy({top:r,behavior:"smooth"}),document.querySelector(".burger").classList.remove("is-active"),document.querySelector(".main-nav").classList.remove("is-active"),document.querySelector(".body").classList.remove("body-hidden")})}),document.querySelectorAll(".gallery-modal-link").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(".gallery-modal"),o=document.querySelector(".modal-block");let r=document.querySelector(".modal-body__picture"),n=document.querySelector(".modal-body__author"),s=document.querySelector(".modal-body__title"),l=document.querySelector(".modal-body__range"),c=document.querySelector(".modal-body__description"),a=this.childNodes[1].innerHTML,d=this.getAttribute("data-author"),u=this.getAttribute("data-title"),m=this.getAttribute("data-range"),v=this.getAttribute("data-description");n.innerHTML=d,s.innerHTML=u,l.innerHTML=m,c.innerHTML=v,r.innerHTML=a,document.body.classList.add("body-hidden"),t.classList.add("is-open"),o.classList.add("is-open"),i.focus()})});const o=document.querySelector(".gallery-modal"),i=document.querySelector(".modal-close");i.addEventListener("click",function(e){e.preventDefault(),closeModal(),document.body.classList.toggle("body-hidden")}),o.addEventListener("click",function(e){e.target.closest(".modal-body")||(closeModal(e.target.closest(".gallery-modal")),document.body.classList.toggle("body-hidden"))});for(var r=document.querySelectorAll(".custom-checkbox__input"),n=0;n<r.length;n++)r[n].addEventListener("click",function(e){e.target.parentNode.classList.toggle("custom-checkbox--active"),spolerCheckboxContainer.classList.contains("is-open")?setEditionSpoilerFullHeight():setEditionSpoilerHeight()});document.querySelector(".editions-expand").addEventListener("click",function(e){e.preventDefault(),this.classList.toggle("is-active"),spolerCheckboxContainer.classList.toggle("is-open"),spolerCheckboxContainer.classList.contains("is-open")?setEditionSpoilerFullHeight():setEditionSpoilerHeight()});var s=document.querySelectorAll(".false-link");for(n=0;n<s.length;n++)s[n].addEventListener("click",function(e){e.preventDefault()});var l=document.querySelectorAll(".dropdown-link"),c=document.querySelectorAll(".dropdown-block");for(n=0;n<l.length;n++)l[n].addEventListener("click",function(e){var t=e.target;for(var o of(console.log(t),l))o!==t&&o.classList.remove("active"),t.classList.toggle("active");for(var i=0;i<c.length;i++)c[i].classList.remove("active");t.classList.contains("active")&&t.nextElementSibling.classList.add("active")});document.addEventListener("click",function(e){e.target.closest(".sub-nav__list")||(l.forEach(e=>{e.classList.remove("active")}),c.forEach(e=>{e.classList.remove("active")}))}),document.querySelector(".header__search-btn").addEventListener("click",function(){this.classList.toggle("is-active"),document.querySelector(".header-search").classList.toggle("is-active"),document.querySelector(".search-form__input").focus(),document.querySelector(".burger").classList.remove("is-active"),document.querySelector(".main-nav").classList.remove("is-active")}),document.querySelector(".burger").addEventListener("click",function(){this.classList.toggle("is-active"),document.querySelector(".main-nav").classList.toggle("is-active"),document.querySelector(".search-popup").classList.remove("is-active"),document.querySelector(".header__search-btn").classList.remove("is-active")}),document.body.addEventListener("click",function(e){e.target.closest(".top-nav__container")||closeSearch()});var a=document.querySelectorAll(".catalog-tabs__link"),d=document.querySelectorAll(".catalog-tab__item");for(n=0;n<a.length;n++)a[n].addEventListener("click",function(e){for(var t=e.target.getAttribute("data-path"),o=0;o<a.length;o++){t===d[o].getAttribute("data-target")?(a[o].classList.add("catalog-tabs__link--active"),d[o].classList.add("catalog-tab__item--active")):(a[o].classList.remove("catalog-tabs__link--active"),d[o].classList.remove("catalog-tab__item--active"))}});var u=document.querySelectorAll(".artists-list__link"),m=document.querySelectorAll(".artist-tab");const v=getWindowWidth();console.log("Художников: "+u.length),console.log("Блоков: "+m.length);for(n=0;n<u.length;n++)u[n].addEventListener("click",function(e){e.preventDefault();for(var t=e.target.getAttribute("data-artist-path"),o=0;o<u.length;o++){if(t===m[o].getAttribute("data-artist-target")){if(u[o].classList.add("artists-list__link--active"),m[o].classList.add("artist-block--active"),v<481){const e=60,t=document.querySelector(".artist-block--active").getBoundingClientRect().top-e;window.scrollBy({top:t,behavior:"smooth"})}}else u[o].classList.remove("artists-list__link--active"),m[o].classList.remove("artist-block--active")}});let g=document.querySelectorAll(".select-accordion__title");g.forEach(e=>{e.removeAttribute("tabindex",1)}),tippy(".tooltip",{theme:"blanchard",animation:"scale"})});
